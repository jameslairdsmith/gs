---
title: "Understanding period limits"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{understanding-period-limits}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  warning =  FALSE,
  message = FALSE
)
```

```{r setup}
library(lubridate)
library(gs)
library(dplyr)
```

The first step is to create the accessor function. This is function whcih
takes a date or dates as input and returns the type of period the date or dates
occur in.

You will already be familiure with accessor functions from lubridate, even if
you haven't called them that.

```{r}
my_dates <- seq.Date(from = as.Date("2018-01-01"),
                     to = as.Date("2019-12-01"),
                     by = "1 month")

month(my_dates)
```

Now we need a custom period. 

Let us use the terms of Oxford University.

I recommend using the case_when() function from `{dplyr}`.

```{r}
oxford_terms <- function(date_vector){
  case_when(
    date_vector >= dmy("07/10/2018") & date_vector <= dmy("01/12/2018") ~ "Michaelmas 2018",
    date_vector >= dmy("13/01/2019") & date_vector <= dmy("09/03/2019") ~ "Hilary 2019",
    date_vector >= dmy("28/04/2019") & date_vector <= dmy("22/06/2019") ~ "Trinity 2019"
  )
}

oxford_terms(my_dates)
```

Now plug into another function.



